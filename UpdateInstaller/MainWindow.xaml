<Window x:Class="UpdateInstaller.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Updating Application" Height="400" Width="600"
        Background="#FF1E1E1E" WindowStyle="None" AllowsTransparency="True"
        ResizeMode="NoResize" WindowStartupLocation="CenterScreen"
        ShowInTaskbar="True">
    <Window.Resources>
        <!-- Button Style -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#FF2D2D30"/>
            <Setter Property="Foreground" Value="#FFFFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF3E3E42"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#FFFF4444"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ProgressBar Style -->
        <Style TargetType="ProgressBar">
            <Setter Property="Background" Value="#FF3E3E42"/>
            <Setter Property="Foreground" Value="#FF4CAF50"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <Border x:Name="PART_Track" 
                                       Background="{TemplateBinding Background}" 
                                       CornerRadius="4"/>
                                <Border x:Name="PART_Indicator" 
                                       Background="{TemplateBinding Foreground}" 
                                       HorizontalAlignment="Left"
                                       CornerRadius="4"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border BorderBrush="#FF007ACC" BorderThickness="2" CornerRadius="8">
        <Grid Margin="30,30,30,8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <Grid Grid.Row="0" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                          Text="Updating Application" 
                          FontSize="24" 
                          FontWeight="Bold"
                          Foreground="#FFFFFFFF"
                          HorizontalAlignment="Center"/>
                <Button x:Name="CloseButton" Grid.Column="1" Content="âœ•" Width="30" Height="30" 
                        Click="CloseButton_Click" 
                        Background="#FF2D2D30" 
                        Padding="0"
                        Cursor="Hand"
                        BorderThickness="0"
                        FontSize="14"
                        Foreground="#FFFFFFFF"/>
            </Grid>

            <!-- Content -->
            <StackPanel Grid.Row="1" VerticalAlignment="Center">
                <TextBlock x:Name="StatusTextBlock" 
                          Text="Waiting for application to close..." 
                          Foreground="#FFD4D4D4"
                          FontSize="16"
                          Margin="0,0,0,20"
                          TextAlignment="Center"
                          TextWrapping="Wrap"/>

                <ProgressBar x:Name="ProgressBar" 
                            Minimum="0" 
                            Maximum="100" 
                            Value="0"
                            Margin="0,0,0,10"/>

                <TextBlock x:Name="ProgressTextBlock" 
                          Text="0%" 
                          Foreground="#FF888888"
                          FontSize="14"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,20"/>

                <TextBlock x:Name="DetailsTextBlock" 
                          Text="" 
                          Foreground="#FF666666"
                          FontSize="12"
                          TextAlignment="Center"
                          TextWrapping="Wrap"
                          MaxHeight="100"/>
                
                <Button x:Name="SelectPathButton" 
                        Content="Select Application Path" 
                        Margin="0,20,0,0"
                        HorizontalAlignment="Center"
                        Padding="15,8"
                        Visibility="Collapsed"
                        Click="SelectPathButton_Click"/>
            </StackPanel>

            <!-- Footer -->
            <TextBlock Grid.Row="2"
                      x:Name="FooterTextBlock" 
                      Text="Please wait while the update is being installed..." 
                      Foreground="#FF888888"
                      FontSize="11"
                      Margin="0,20,0,0"
                      TextAlignment="Center"
                      TextWrapping="Wrap" VerticalAlignment="Top"/>

            <!-- Icon/Animation -->
            <Grid Grid.Row="3" Margin="0,20,0,0" HorizontalAlignment="Center">
                <Ellipse Width="60" Height="60" 
                        Stroke="#FF007ACC" 
                        StrokeThickness="3"
                        Opacity="0.3"/>
                <Ellipse Width="60" Height="60" 
                        Stroke="#FF4CAF50" 
                        StrokeThickness="2"
                        Opacity="0.5">
                    <Ellipse.RenderTransform>
                        <ScaleTransform x:Name="IconScale" ScaleX="1" ScaleY="1"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Window.Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="IconScale"
                                                   Storyboard.TargetProperty="ScaleX"
                                                   From="1" To="1.2" Duration="0:0:1"
                                                   AutoReverse="True"/>
                                    <DoubleAnimation Storyboard.TargetName="IconScale"
                                                   Storyboard.TargetProperty="ScaleY"
                                                   From="1" To="1.2" Duration="0:0:1"
                                                   AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
            </Grid>
        </Grid>
    </Border>
</Window>

